<% profile_count = Profile.active.count %>

<body data-mp-track-visit="catalogo">

  <%= render "app_components/header", classes: "bg-primary text-light flat", right_buttons: [:options] %>
  <div class="extraHeader p-0">
    <ul class="nav nav-tabs lined" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="tab-categorias" data-toggle="tab" href="#categorias" role="tab" aria-selected="true">
          Categorias
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="tab-bairros" data-toggle="tab" href="#bairros" role="tab" aria-selected="false">
          Bairros
        </a>
      </li>
    </ul>
  </div>

  <!-- App Capsule -->
  <div id="appCapsule" class="extra-header-active mt-3 mb-5">
    <div class="tab-content mt-1">

      <!-- categorias tab -->
      <div class="tab-pane fade active show" id="categorias" role="tabpanel">
        <div class="header-large-title">
          <h1 class="title">Categorias</h1>
          <h4 class="subtitle"><%= profile_count %> pequenos negócios cadastrados</h4>
        </div>
        <%= render "catalogo/categorias_list", categs: @categs %>
      </div>
      <!-- * categorias tab -->

      <!-- localização tab -->
      <div class="tab-pane fade" id="bairros" role="tabpanel">
        <div class="header-large-title">
          <h1 class="title">Bairros</h1>
          <h4 class="subtitle"><%= profile_count %> pequenos negócios cadastrados</h4>
        </div>
        <%= render "catalogo/bairros_list", bairros: @bairros %>
      </div>
      <!-- * localização tab -->

    </div>
  </div>
  <!-- * App Capsule -->

</body>

<script type="text/javascript">

$(document).ready(function () {
  <% if params[:tab].present? %>
    $("#tab-<%= params[:tab] %>").click();
  <% end %>

  <% if params[:list].present? %>
    $("#list-<%= params[:list] %>").click();
  <% end %>
});
</script>